<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Document</title>
</head>

<body>
  <img src="#" />
  <button class="new-img">ANOTHER CAT</button>
  <form action="">
    <input type="search" name="search-bar" />
    <button class="submit" type="submit">submit</button>
  </form>
  <script>
    const img = document.querySelector("img");
    const newImgBtn = document.querySelector(".new-img");
    const searchBar = document.querySelector("input");
    const form = document.querySelector("form");

    newImgBtn.addEventListener("click", fetchNewCat);
    form.addEventListener("submit", async (event) => {
      event.preventDefault();
      const searchText = searchBar.value;
      if (searchText.trim() === "") {
        alert("Search cannot be blank");
        return;
      }
      try {
        const url = `https://api.giphy.com/v1/gifs/translate?api_key=rdsDp96jiXdVBudqXyLNiD9Y2Vy2EebB&s=${searchText}`;
        const response = await fetch(url, {mode: "cors"});
        const responseJSON = await response.json();
        img.src = responseJSON.data.images.original.url;
      } catch (err) {
        console.error(err);
      }
    });

    async function fetchNewCat() {
      try {
        const response = await fetch(
          "https://api.giphy.com/v1/gifs/translate?api_key=rdsDp96jiXdVBudqXyLNiD9Y2Vy2EebB&s=cats",
          {mode: "cors"},
        );

        const responseJSON = await response.json();
        console.log(responseJSON);
        img.src = responseJSON.data.images.original.url;
      } catch (err) {
        console.error(err);
      }
    }

    fetchNewCat();
  </script>
</body>

</html>
